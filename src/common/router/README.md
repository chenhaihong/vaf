# beforeEach 登录验证与角色鉴权逻辑

```
1 关闭了登录过滤器 ---------------------------------------------- next()
2 未登录
  2.1 登录页 --------------------------------------------------- next()
  2.2 这个路由可以匿名访问 -------------------------------------- next()
  2.3 需登录才能访问 || 需鉴别权限后才能访问 --------------------- next('/login?redirect=${fromHash}')
  2.4 其他情况 ------------------------------------------------- next('/403')
3 已经登录
  3.1 未拉取用户信息，则拉取用户信息
    3.1.1 拉取信息失败 ----------------------------------------- next('/500')，在request中处理错误提示
    3.1.2 拉取信息成功 ----------------------------------------- 更新本地信息，然后，走分支3.2
  3.2 登录页 --------------------------------------------------- next('/')
  3.3 关闭了角色过滤器 || 这个路由可以匿名访问 || 需登录才能访问 --- next()
  3.4 需鉴别角色权限后才能访问
    3.4.1 有访问权限 -------------------------------------------- next()
    3.4.2 无访问权限 -------------------------------------------- next('/403')
  2.4 其他情况 -------------------------------------------------- next('/403')
====================================================================================================
```
